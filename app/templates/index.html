{% extends "base.html" %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="h4">My Files</h2>
        <div class="d-flex align-items-center">
            <div class="dropdown me-2">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sort-by-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    Sort by
                </button>
                <ul class="dropdown-menu" aria-labelledby="sort-by-dropdown">
                    <li><a class="dropdown-item" href="#" data-sort="name">Name</a></li>
                    <li><a class="dropdown-item" href="#" data-sort="date">Date Modified</a></li>
                </ul>
            </div>
            <button class="btn btn-primary me-2" type="button" data-bs-toggle="modal" data-bs-target="#uploadModal">
                <i class="bi bi-cloud-arrow-up-fill me-1"></i> Upload File
            </button>
            <button class="btn btn-primary me-2" type="button" data-bs-toggle="modal" data-bs-target="#uploadFolderModal">
                <i class="bi bi-folder-symlink-fill me-1"></i> Upload Folder
            </button>
            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#newFolderModal">
                <i class="bi bi-folder-plus me-1"></i> New Folder
            </button>
        </div>
    </div>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb" id="breadcrumb-nav">
            <li class="breadcrumb-item"><a href="#" data-folder-id="null">Home</a></li>
        </ol>
    </nav>

    <div class="card">
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Type</th>
                        <th scope="col">Date Modified</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="file-list">
                    <!-- File and folder list will be dynamically inserted here by JavaScript -->
                    <tr>
                        <td colspan="4" class="text-center text-muted">Loading files...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

<!-- Upload Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadModalLabel">Upload File</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="upload-form">
          <div class="mb-3">
            <label for="file-input" class="form-label">Select a file</label>
            <input class="form-control" type="file" id="file-input" required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="upload-button">Upload</button>
      </div>
    </div>
  </div>
</div>

<!-- Upload Folder Modal -->
<div class="modal fade" id="uploadFolderModal" tabindex="-1" aria-labelledby="uploadFolderModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadFolderModalLabel">Upload Folder</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="upload-folder-form">
          <div class="mb-3">
            <label for="folder-input" class="form-label">Select a folder</label>
            <input class="form-control" type="file" id="folder-input" webkitdirectory directory required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="upload-folder-button">Upload</button>
      </div>
    </div>
  </div>
</div>

<!-- New Folder Modal -->
<div class="modal fade" id="newFolderModal" tabindex="-1" aria-labelledby="newFolderModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newFolderModalLabel">New Folder</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="new-folder-form">
          <div class="mb-3">
            <label for="folder-name-input" class="form-label">Folder Name</label>
            <input class="form-control" type="text" id="folder-name-input" required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="create-folder-button">Create</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
